---
import Layout from "../layouts/Layout.astro";
import PlansList from "../components/dashboard/PlansList.tsx";

// SSR Guard: Redirect to login if not authenticated
const { user } = Astro.locals;

if (!user) {
  const redirectUrl = `/auth/login?next=${encodeURIComponent(Astro.url.pathname)}`;
  return Astro.redirect(redirectUrl);
}
---

<Layout title="Dashboard">
  <div class="min-h-screen mx-auto max-w-6xl px-4 py-8">
    <PlansList client:load />
  </div>
</Layout>
